{"id":"91f6bbe2-ed41-4fd6-bac7-71d5b5864ecb","revision":0,"last_node_id":115,"last_link_id":231,"nodes":[{"id":75,"type":"CFGNorm","pos":[740,-20],"size":[290,60],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":141},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"patched_model","name":"patched_model","type":"MODEL","links":[186]}],"properties":{"Node name for S&R":"CFGNorm","cnr_id":"comfy-core","ver":"0.3.50","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"strength":true}}},"widgets_values":[1]},{"id":8,"type":"VAEDecode","pos":[1080,-130],"size":[210,46],"flags":{"collapsed":false},"order":19,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":128},{"localized_name":"vae","name":"vae","type":"VAE","link":76}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[110]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.48","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[]},{"id":60,"type":"SaveImage","pos":[1070,-30],"size":[950,1040],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":110},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"Node name for S&R":"SaveImage","cnr_id":"comfy-core","ver":"0.3.48","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":93,"type":"ImageScaleToTotalPixels","pos":[-230,890],"size":[270,82],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":177},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[178,224,225]}],"properties":{"Node name for S&R":"ImageScaleToTotalPixels","cnr_id":"comfy-core","ver":"0.3.50","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":113,"type":"MarkdownNote","pos":[730,1030],"size":[330,90],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"Note: About image size","properties":{},"widgets_values":["You can use the latent from the **EmptySD3LatentImage** to replace **VAE Encode**, so you can customize the image size."],"color":"#432","bgcolor":"#653"},{"id":97,"type":"MarkdownNote","pos":[740,610],"size":[300,160],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"Note: KSampler settings","properties":{},"widgets_values":["You can test and find the best setting by yourself. The following table is for reference.\n\n| Model            | Steps | CFG |\n|---------------------|---------------|---------------|\n| Offical             | 50               | 4.0               \n| fp8_e4m3fn             | 20                | 2.5               |\n| fp8_e4m3fn + 4steps LoRA    | 4               | 1.0               |\n"],"color":"#432","bgcolor":"#653"},{"id":99,"type":"MarkdownNote","pos":[-840,-140],"size":[550,550],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Model links","properties":{"widget_ue_connectable":{}},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/image/qwen/qwen-image-edit) | [æ•™ç¨‹](https://docs.comfy.org/zh-CN/tutorials/image/qwen/qwen-image-edit)\n\n\n## Model links\n\nYou can find all the models on [Comfy-Org/Qwen-Image_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/tree/main) and  [Comfy-Org/Qwen-Image-Edit_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI) \n\n**Diffusion model**\n\n- [qwen_image_edit_2509_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors)\n\n**LoRA**\n\n- [Qwen-Image-Lightning-4steps-V1.0.safetensors](https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors)\n\n**Text encoder**\n\n- [qwen_2.5_vl_7b_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors)\n\n**VAE**\n\n- [qwen_image_vae.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors)\n\nModel Storage Location\n\n```\nðŸ“‚ ComfyUI/\nâ”œâ”€â”€ ðŸ“‚ models/\nâ”‚   â”œâ”€â”€ ðŸ“‚ diffusion_models/\nâ”‚   â”‚   â””â”€â”€ qwen_image_edit_2509_fp8_e4m3fn.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ loras/\nâ”‚   â”‚   â””â”€â”€ Qwen-Image-Lightning-4steps-V1.0.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ vae/\nâ”‚   â”‚   â””â”€â”€ qwen_image_vae.safetensors\nâ”‚   â””â”€â”€ ðŸ“‚ text_encoders/\nâ”‚       â””â”€â”€ qwen_2.5_vl_7b_fp8_scaled.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":96,"type":"MarkdownNote","pos":[-240,1030],"size":[290,140],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node is to avoid bad output results caused by excessively large input image sizes. Because when we input one image, we use the size of that input image.\n\nThe **TextEncodeQwenImageEditPlus** will scale your input to 1024Ã—104 pixels. We use the size of your first input image. This node is to avoid having an input image size that is too large (such as 3000Ã—3000 pixels), which could bring bad results."],"color":"#432","bgcolor":"#653"},{"id":38,"type":"CLIPLoader","pos":[-250,160],"size":[330,110],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[204,205]}],"properties":{"Node name for S&R":"CLIPLoader","cnr_id":"comfy-core","ver":"0.3.48","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":39,"type":"VAELoader","pos":[-250,320],"size":[330,60],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[76,168,206,207]}],"properties":{"Node name for S&R":"VAELoader","cnr_id":"comfy-core","ver":"0.3.48","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_vae.safetensors"]},{"id":110,"type":"TextEncodeQwenImageEditPlus","pos":[220,170],"size":[400,200],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":204},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":206},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":225},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":220},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":218},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[210]}],"properties":{"Node name for S&R":"TextEncodeQwenImageEditPlus","cnr_id":"comfy-core","ver":"0.3.59"},"widgets_values":[""],"color":"#223","bgcolor":"#335"},{"id":112,"type":"EmptySD3LatentImage","pos":[750,860],"size":[270,106],"flags":{},"order":6,"mode":4,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[]}],"properties":{"Node name for S&R":"EmptySD3LatentImage","cnr_id":"comfy-core","ver":"0.3.59"},"widgets_values":[1024,1024,1]},{"id":88,"type":"VAEEncode","pos":[490,900],"size":[140,46],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":178},{"localized_name":"vae","name":"vae","type":"VAE","link":168}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[228]}],"properties":{"Node name for S&R":"VAEEncode","cnr_id":"comfy-core","ver":"0.3.50","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":[]},{"id":108,"type":"LoadImage","pos":[352.16015625,530],"size":[274.080078125,314.0000305175781],"flags":{},"order":7,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[217,218]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.3.50","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"image":true,"upload":true}}},"widgets_values":["beach.jpg","image"]},{"id":66,"type":"ModelSamplingAuraFlow","pos":[436.7413330078125,-289.7907409667969],"size":[290,60],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":231},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[141]}],"properties":{"Node name for S&R":"ModelSamplingAuraFlow","cnr_id":"comfy-core","ver":"0.3.48","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[3]},{"id":89,"type":"LoraLoaderModelOnly","pos":[-240,40],"size":[310,82],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":230},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[231]}],"properties":{"Node name for S&R":"LoraLoaderModelOnly","cnr_id":"comfy-core","ver":"0.3.50","models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"lora_name":true,"strength_model":true}}},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0.safetensors",1]},{"id":78,"type":"LoadImage","pos":[-240,530],"size":[274.080078125,314.0000305175781],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[177]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.3.50","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"image":true,"upload":true}}},"widgets_values":["hut_01.jpg","image"]},{"id":37,"type":"UNETLoader","pos":[-261.1683349609375,-154.12261962890625],"size":[330,90],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[230]}],"properties":{"Node name for S&R":"UNETLoader","cnr_id":"comfy-core","ver":"0.3.48","models":[{"name":"qwen_image_edit_2509_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors","directory":"diffusion_models"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_edit_2509_fp8_e4m3fn.safetensors","default"]},{"id":106,"type":"LoadImage","pos":[56.080078125,530],"size":[274.080078125,314.0000305175781],"flags":{},"order":10,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[219,220]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.3.50","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"image":true,"upload":true}}},"widgets_values":["ComfyUI_00015_.png","image"]},{"id":111,"type":"TextEncodeQwenImageEditPlus","pos":[216.56375122070312,-59.07271957397461],"size":[400,200],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":205},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":207},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":224},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":219},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":217},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[211]}],"properties":{"Node name for S&R":"TextEncodeQwenImageEditPlus","cnr_id":"comfy-core","ver":"0.3.59"},"widgets_values":["Cut out the hat and place it on a pure white background, like an e-commerce product photo. Preserve realistic hat texture and shadow under brim."],"color":"#232","bgcolor":"#353"},{"id":3,"type":"KSampler","pos":[740,90],"size":[300,474],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":186},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":211},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":210},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":228},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[128]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.48","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[758283799389730,"randomize",4,2.5,"euler","simple",1]}],"links":[[76,39,0,8,1,"VAE"],[110,8,0,60,0,"IMAGE"],[128,3,0,8,0,"LATENT"],[141,66,0,75,0,"MODEL"],[168,39,0,88,1,"VAE"],[177,78,0,93,0,"IMAGE"],[178,93,0,88,0,"IMAGE"],[186,75,0,3,0,"MODEL"],[204,38,0,110,0,"CLIP"],[205,38,0,111,0,"CLIP"],[206,39,0,110,1,"VAE"],[207,39,0,111,1,"VAE"],[210,110,0,3,2,"CONDITIONING"],[211,111,0,3,1,"CONDITIONING"],[217,108,0,111,4,"IMAGE"],[218,108,0,110,4,"IMAGE"],[219,106,0,111,3,"IMAGE"],[220,106,0,110,3,"IMAGE"],[224,93,0,111,2,"IMAGE"],[225,93,0,110,2,"IMAGE"],[228,88,0,3,3,"LATENT"],[230,37,0,89,0,"MODEL"],[231,89,0,66,0,"MODEL"]],"groups":[{"id":1,"title":"Step1 - Load models","bounding":[-270,-170,370,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Step 2 - Upload image for editing","bounding":[-270,430,970,550],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Step 4 - Prompt","bounding":[130,-170,570,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Step3 - Image Size","bounding":[730,780,310,200],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.7760151882637364,"offset":[1179.6128614670024,334.5497859184629]},"frontendVersion":"1.28.1","ue_links":[],"links_added_by_ue":[],"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}