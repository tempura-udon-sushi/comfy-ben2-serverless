{"id":"91f6bbe2-ed41-4fd6-bac7-71d5b5864ecb","revision":0,"last_node_id":108,"last_link_id":196,"nodes":[{"id":39,"type":"VAELoader","pos":[-250,330],"size":[330,60],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[76,161,162,168]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_vae.safetensors"]},{"id":75,"type":"CFGNorm","pos":[550,130],"size":[290,60],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":141},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"patched_model","name":"patched_model","type":"MODEL","links":[186]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"CFGNorm","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"strength":true}}},"widgets_values":[1]},{"id":88,"type":"VAEEncode","pos":[370,630],"size":[140,46],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":194},{"localized_name":"vae","name":"vae","type":"VAE","link":168}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[170]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"VAEEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":[]},{"id":97,"type":"MarkdownNote","pos":[550,780],"size":[300,190],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"KSampler settings","properties":{},"widgets_values":["You can test and find the best setting by yourself. The following table is for reference.\n\n| Model            | Steps | CFG |\n|---------------------|---------------|---------------|\n| Offical             | 50               | 4.0               \n| fp8_e4m3fn             | 20                | 2.5               |\n| fp8_e4m3fn + 4steps LoRA    | 4               | 1.0               |\n"],"color":"#432","bgcolor":"#653"},{"id":38,"type":"CLIPLoader","pos":[-250,170],"size":[330,110],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[131,132]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPLoader","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":99,"type":"MarkdownNote","pos":[-830,-10],"size":[540,550],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"Model links","properties":{"widget_ue_connectable":{}},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/image/qwen/qwen-image-edit) | [æ•™ç¨‹](https://docs.comfy.org/zh-CN/tutorials/image/qwen/qwen-image-edit)\n\n\n## Model links\n\nYou can find all the models on [Comfy-Org/Qwen-Image_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/tree/main) and  [Comfy-Org/Qwen-Image-Edit_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI) \n\n**Diffusion model**\n\n- [qwen_image_edit_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_fp8_e4m3fn.safetensors)\n\n**LoRA**\n\n- [Qwen-Image-Lightning-4steps-V1.0.safetensors](https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors)\n\n**Text encoder**\n\n- [qwen_2.5_vl_7b_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors)\n\n**VAE**\n\n- [qwen_image_vae.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors)\n\nModel Storage Location\n\n```\nðŸ“‚ ComfyUI/\nâ”œâ”€â”€ ðŸ“‚ models/\nâ”‚   â”œâ”€â”€ ðŸ“‚ diffusion_models/\nâ”‚   â”‚   â””â”€â”€ qwen_image_edit_fp8_e4m3fn.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ loras/\nâ”‚   â”‚   â””â”€â”€ Qwen-Image-Lightning-4steps-V1.0.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ vae/\nâ”‚   â”‚   â””â”€â”€ qwen_image_vae.safetensors\nâ”‚   â””â”€â”€ ðŸ“‚ text_encoders/\nâ”‚       â””â”€â”€ qwen_2.5_vl_7b_fp8_scaled.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":37,"type":"UNETLoader","pos":[-250,30],"size":[330,90],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[184]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"UNETLoader","models":[{"name":"qwen_image_edit_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_fp8_e4m3fn.safetensors","directory":"diffusion_models"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_edit_fp8_e4m3fn.safetensors","default"]},{"id":77,"type":"TextEncodeQwenImageEdit","pos":[140,400],"size":[360,150],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":132},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":161},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":195},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[163]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"TextEncodeQwenImageEdit","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"prompt":true}}},"widgets_values":[""],"color":"#223","bgcolor":"#335"},{"id":66,"type":"ModelSamplingAuraFlow","pos":[474.7358703613281,-71.75064086914062],"size":[290,60],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":185},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[141]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"ModelSamplingAuraFlow","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[3]},{"id":89,"type":"LoraLoaderModelOnly","pos":[149.929443359375,-7.273701190948486],"size":[270,82],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":184},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[185]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"lora_name":true,"strength_model":true}}},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0.safetensors",1]},{"id":3,"type":"KSampler","pos":[550,240],"size":[300,474],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":186},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":164},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":163},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":170},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[128]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"KSampler","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[1090518399712900,"fixed",4,2.5,"euler","simple",1]},{"id":96,"type":"MarkdownNote","pos":[-210,1020],"size":[280,88],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node is to avoid poor output results caused by excessively large input image sizes."],"color":"#432","bgcolor":"#653"},{"id":8,"type":"VAEDecode","pos":[890,20],"size":[210,46],"flags":{"collapsed":false},"order":17,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":128},{"localized_name":"vae","name":"vae","type":"VAE","link":76}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[191,192]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAEDecode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[]},{"id":60,"type":"SaveImage","pos":[1818.194091796875,-54.658721923828125],"size":[580,650],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":191},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":107,"type":"PreviewImage","pos":[1098.952392578125,109.55545043945312],"size":[589.2356567382812,556.5177612304688],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":192}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":93,"type":"ImageScaleToTotalPixels","pos":[-343.24993896484375,855.1009521484375],"size":[270,82],"flags":{},"order":9,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":177},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"ImageScaleToTotalPixels","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":108,"type":"SmartResizeForModel","pos":[-355.3559265136719,617.5441284179688],"size":[276.1727294921875,146],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":193},{"localized_name":"target_model","name":"target_model","type":"COMBO","widget":{"name":"target_model"},"link":null},{"localized_name":"resize_mode","name":"resize_mode","type":"COMBO","widget":{"name":"resize_mode"},"link":null},{"localized_name":"interpolation","name":"interpolation","shape":7,"type":"COMBO","widget":{"name":"interpolation"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[194,195,196]},{"localized_name":"original_width","name":"original_width","type":"INT","links":[]},{"localized_name":"original_height","name":"original_height","type":"INT","links":[]}],"properties":{"Node name for S&R":"SmartResizeForModel"},"widgets_values":["1024 (BEN2/BiRefNet)","smart","lanczos"]},{"id":78,"type":"LoadImage","pos":[-785.7838134765625,626.9046630859375],"size":[274.080078125,314.0000305175781],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[177,193]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"LoadImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"image":true,"upload":true}}},"widgets_values":["3597982f4b1f0df0785568d001ca3f88734af687_04.jpeg","image"]},{"id":106,"type":"MarkdownNote","pos":[157.15296936035156,788.9657592773438],"size":[358.1314392089844,148.9281463623047],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Cut out the accessories and place it on a pure white background, like an e-commerce product photo. Preserve realistic hat texture and shadow under brim.\n\n\n\nRemove the object pointed by the blue circle."],"color":"#432","bgcolor":"#653"},{"id":76,"type":"TextEncodeQwenImageEdit","pos":[140,200],"size":[360,150],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":131},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":162},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":196},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[164]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"TextEncodeQwenImageEdit","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"prompt":true}}},"widgets_values":["Remove the object pointed by the blue circle."],"color":"#232","bgcolor":"#353"}],"links":[[76,39,0,8,1,"VAE"],[128,3,0,8,0,"LATENT"],[131,38,0,76,0,"CLIP"],[132,38,0,77,0,"CLIP"],[141,66,0,75,0,"MODEL"],[161,39,0,77,1,"VAE"],[162,39,0,76,1,"VAE"],[163,77,0,3,2,"CONDITIONING"],[164,76,0,3,1,"CONDITIONING"],[168,39,0,88,1,"VAE"],[170,88,0,3,3,"LATENT"],[177,78,0,93,0,"IMAGE"],[184,37,0,89,0,"MODEL"],[185,89,0,66,0,"MODEL"],[186,75,0,3,0,"MODEL"],[191,8,0,60,0,"IMAGE"],[192,8,0,107,0,"IMAGE"],[193,78,0,108,0,"IMAGE"],[194,108,0,88,0,"IMAGE"],[195,108,0,77,2,"IMAGE"],[196,108,0,76,2,"IMAGE"]],"groups":[{"id":1,"title":"Step1 - Load models","bounding":[-270,-40,370,450],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Step 2 - Upload image for editing","bounding":[-835.7837524414062,556.9046630859375,370,400],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Step 3 - Prompt","bounding":[130,130,380,433.6000061035156],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.839054528882416,"offset":[1005.6219150937216,-8.671864527005479]},"frontendVersion":"1.26.5","ue_links":[],"links_added_by_ue":[],"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}